!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["iris-t"]=t():e["iris-t"]=t()}(self,(function(){return e={},function(e){if(void 0===e.IIRISTracker){e.IIRISTracker=(o={snowplowEnabled:!1,tdEnabled:!1,collectorHost:"",appId:"",td:null,lob:"",domain:"",initConfig:function(t){if(t.config&&t.config.snowplow){this.snowplowEnabled=!0;var o=t.config.snowplow.appId,n=t.config.snowplow.cDomain;o&&n?this.initSnowplowConfig(o,n):console.err("appId and cDomain are required.")}var i=location.href;if("MutationObserver"in e&&new MutationObserver((function(){var t=location.href;t!==i&&(i=t,e.snowplow("trackPageView"))})).observe(document,{subtree:!0,childList:!0}),t.config&&t.config.td){this.tdEnabled=!0;var a=t.config.td.lob,s=t.config.td.domain;a&&s?this.initTDConfig(a,s):console.err("lob and domain are required.")}this.setEloquaHashEmail()},setTrackingUID:function(t){this.snowplowEnabled&&(t&&(document.cookie="IRIS_ID="+t+"; path=/;"),e.snowplow("setUserIdFromCookie","IRIS_ID")),this.tdEnabled&&this.setTDCustomData(t)},clearTrackingUID:function(){this.snowplowEnabled&&(document.cookie="IRIS_ID=; Max-Age=-99999999; path=/;",e.snowplow("clearUserData"))},trackImpression:function(t){this.snowplowEnabled&&e.snowplow("trackSelfDescribingEvent",{event:{schema:"iglu:com.snowplowanalytics.snowplow/ad_impression/jsonschema/1-0-0",data:t}})},trackStructEvt:function(t){this.snowplowEnabled&&t&&e.snowplow("trackStructEvent",{category:t.cat,action:t.act,label:t.lbl,property:t.prop,value:t.val})},setEloquaHashEmail:function(){var t=new Proxy(new URLSearchParams(e.location.search),{get:function(e,t){return e.get(t)}}).sp_eh;t&&(document.cookie="_iris_eloqua_em="+t+"; path=/;")},initSnowplowConfig:function(t,o){var n,i,a,s,r,c,l,d=["www.gamedeveloper.com","localhost","www.informationweek.com","www.iotworldtoday.com"],p=["gamedeveloper.tradepub.com"];n=e,i=document,a="script",s="//static.iris.informa.com/f23io39d.js",n[r="snowplow"]||(n.GlobalSnowplowNamespace=n.GlobalSnowplowNamespace||[],n.GlobalSnowplowNamespace.push(r),n[r]=function(){(n[r].q=n[r].q||[]).push(arguments)},n[r].q=n[r].q||[],c=i.createElement(a),l=i.getElementsByTagName(a)[0],c.async=1,c.src=s,l.parentNode.insertBefore(c,l)),e.snowplow("newTracker","sp1",o,{appId:t,discoverRootDomain:!0,cookieSameSite:"Lax",postPath:"/com.iiris/ed0",crossDomainLinker:function(t){if(d.includes(e.location.hostname)&&p.includes(t.hostname)){if(t.href.includes("javascript:")||t.href.includes("tel:")||t.href.includes("mailto:"))return!1;if(t.href.indexOf(e.location.host)>0||t.href.indexOf("#")>0)return!1;var o=function(e){e=e||"_sp_";var t=new RegExp(e+"id\\.[a-f0-9]+=([^;]+);?"),o=document.cookie.match(t);return!(!o||!o[1])&&o[1].split(".")[0]}();return!!o&&(t.search.includes("?")?t.search=t.search+"&_sp="+o:t.search=t.search+"?_sp="+o,!0)}},contexts:{performanceTiming:!1}}),e.snowplow("setUserIdFromCookie","IRIS_ID"),e.snowplow("enableActivityTracking",{minimumVisitLength:30,heartbeatDelay:30}),e.snowplow("enableLinkClickTracking"),e.snowplow("trackPageView"),this.collectorHost=o,this.appId=t},initTDConfig:function(e,t){!function(){!function(e,t){if(void 0===t[e]){t[e]=function(){t[e].clients.push(this),this._init=[Array.prototype.slice.call(arguments)]},t[e].clients=[];for(var o=["addRecord","blockEvents","fetchServerCookie","fetchGlobalID","fetchUserSegments","resetUUID","ready","setSignedMode","setAnonymousMode","set","trackEvent","trackPageview","trackClicks","unblockEvents"],n=0;n<o.length;n++){var i=o[n];t[e].prototype[i]=function(e){return function(){return this["_"+e]=this["_"+e]||[],this["_"+e].push(Array.prototype.slice.call(arguments)),this}}(i)}var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.treasuredata.com/sdk/3.0/td.min.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(a,s)}}("Treasure",this)}(),this.td=new Treasure({database:"webtracking_"+e,writeKey:"100/bb9cbe21de3db7a5428506d7528e45b2c801a48c",host:"eu01.in.treasuredata.com"}),this.td.setSignedMode(),this.td.set("$global","td_global_id","td_global_id");var o=function(e){},n=function(e){console.log(e)};this.lob=e,this.domain=t,this.setTDCustomData(function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2]}("IRIS_ID")),this.td.trackPageview("js_pageviews_"+e+"_"+t,(function(){this.td.fetchGlobalID(o,n)}))},setTDCustomData:function(e){var t={};try{void 0!==e&&(t.userid=e)}catch(o){return console.log("Error occurred in setTDCustomData ::"+e),t}console.log("Setting :: "+t.userid),this.td.set("js_pageviews_"+this.lob+"_"+this.domain,t)}},o);var t=new Event("trackerInitialized");e.dispatchEvent(t)}var o}(window),e=e.default;var e}));
//# sourceMappingURL=iris-t.js.map